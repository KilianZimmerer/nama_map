<!DOCTYPE html>

<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css" href="map.css">
  <link rel="stylesheet" href="L.Control.Sidebar.css" />
  <link rel="stylesheet" href="general.css" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
</head>

<body>
  <div id="sidebar"></div>
  <div id="map"></div>

  <div class="nxt-content">
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
      <a class="navbar-brand" href="https://www.nachbarschaftsmarktplatz.de">
        <img src="./icon-white-1.png" width="50" alt="">
        Nachbarschaftsmarktplatz
      </a>
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="#" role="button" data-toggle="modal" data-target="#shopRegistration"> Shop
            registrieren </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#" role="button" onclick="openInfoSidebar()"> Infos </a>
        </li>
      </ul>
    </nav>
  </div>

  <div id="shopRegistration" class="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="registrationForm" method="POST" enctype="multipart/form-data">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Shop Registrierung</h4>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            <div class="form-group">
              <label for="usr">Name des Geschäfts</label>
              <input type="text" class="form-control" name="shop_name" required="true">
            </div>
            <div class="form-group">
              <label for="usr">Straße und Hausnummer</label>
              <input type="text" class="form-control" name="shop_street" required="true">
            </div>
            <div class="form-group">
              <label for="usr">PLZ</label>
              <input type="text" class="form-control" name="shop_plz" required="true">
            </div>
            <div class="form-group">
              <label for="usr">Email</label>
              <input type="text" class="form-control" name="shop_email" required="true">
            </div>
            <div class="form-group">
              <label for="usr">Webseite</label>
              <input type="text" class="form-control" name="shop_website">
            </div>
            <div class="form-group">
              <label for="usr">Telefonnummer (Unter der Kund*innen Sie erreichen können)</label>
              <input type="text" class="form-control" name="shop_phone">
            </div>
            <div class="form-group">
              <label for="usr">Telefonische Erreichbarkeit</label>
              <div class="checkbox">
                <ul class="mylist">
                </ul>

              </div>
            </div>
            <hr>
            <div class="form-group">
              <label for="usr">Beschreibung des Geschäfts (3-4 Sätze, optional)</label>
              <textarea class="form-control" rows="3" name="shop_description"
                placeholder="Diese Beschreibung wird Ihrem Shop Profil angefügt."></textarea>
            </div>
            <hr>
            <div class="form-group">
              <label for="usr">Kassensystem/Warenwirtschaftssystem</label>
              <textarea class="form-control" rows="3" name="warenwirtschaftssystem"
                placeholder="Falls ein Warenwirtschaftsprogramm benutzt wird, freuen wir uns über die Information welches, um eine einfache Anbindung an den Online Shop zu ermöglichen."></textarea>
            </div>
            <hr>
            <div class="form-group">
              <label for="usr">Warenkategorien, getrennt durch Komma</label>
              <input type="text" class="form-control" name="shop_categories"
                placeholder="z.B. Tabakwaren, Zeitschriften, Bücher, Getränke" required="true">
            </div>
            <hr>
            <div class="form-group">
              <label for="usr">Versandmöglichkeiten</label>
              <div class="checkbox">
                <label><input type="checkbox" value="" name="pick_up"> Abholung </label> <br>
                <label><input type="checkbox" value="" name="bicycle"> Interesse an Fahrradlieferung </label> <br>
                <label><input type="checkbox" value="" name="postal"> Versand per Post </label>
                <div class="input-group mb-3">
                  <input type="text" class="form-control" placeholder="Weitere Versandmöglichkeit" name="misc_shipping">
                </div>
                <hr>
                <p>Zum einbinden auf unserer Webseite schicken Sie uns gerne Bilder und Logos Ihres Geschäfts an
                  <a href="nachbarschaftsmarktplatz@posteo.de">nachbarschaftsmarktplatz@posteo.de</a></p>
                <button type="submit" class="btn btn-primary float-right">Absenden</button>
                <br> <br>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>

  <div id="registrationSuccess" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <p>Vielen Dank. Ihre Eingabe wird überprüft und schon bald auf der Karte sichtbar werden.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <script src="shop_data.js"></script>
  <script src="create_map.js"></script>
  <script src="L.Control.Sidebar.js"></script>
  <script>
    var sidebar = L.control.sidebar('sidebar', {
      closeButton: false,
      position: 'right',
      autoPan: false,
    });
    map.addControl(sidebar);
  </script>
  <script src="create_markers.js"></script>
  <script>
    map.on('click', onClickMap);

    function onClickMap(e) {
      if (sidebar.isVisible()) {
        sidebar.hide()
      }
    }
  </script>
  <script>
    function openInfoSidebar() {
      var infosContent = (
        `<div>
          <h2> Infos </h2>
          <hr>
          <h4> Wer wir sind </h4>
          <br>
          <p class="text-justify">
          Wir sind eine wachsende Gruppe von mittlerweile über 40 Menschen (nicht nur) aus Berlin,
          die sich im Rahmen des <a href="https://wirvsvirushackathon.devpost.com/"> WirVsVirus-Hackathons </a> zusammengefunden hat.
          </p>
        </div>`
      )
      sidebar.setContent(infosContent);
      sidebar.toggle();

    }

  </script>
  <script>
    var weekdays = ['Mo-Do', 'Freitag'];
    var cList = $('ul.mylist')

    var from = (label) => {
      return $('<input />', {
        size: 10,
        value: '00:00',
        name: label + '_phone_availability_from',
        class: 'span2',
      })
    }
    var to = (label) => {
      return $('<input />')
        .addClass('span2')
        .attr('size', 10)
        .attr('value', '00:00')
        .attr('name', label + '_phone_availability_to')
    }
    var checkbox = (label) => {
      return $('<label />')
        .append(
          $('<input />', {
            type: 'checkbox',
            value: '',
            name: label + "_availability",
          })
        ).append('&nbsp;' + label + '&nbsp;')
    }

    $.each(weekdays, function (i) {

      var li = $('<li/>')
        .append(checkbox(weekdays[i]))
        .append('von&nbsp;')
        .append(from(weekdays[i]))
        .append('&nbsp;bis&nbsp;')
        .append(to(weekdays[i]))
        .appendTo(cList);
    });
  </script>

  <script src="model.js"></script>
</body>

</html>